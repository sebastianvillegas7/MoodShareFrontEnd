"use strict";(self.webpackChunkmoviesApp=self.webpackChunkmoviesApp||[]).push([[985],{5985:(L,f,i)=>{i.r(f),i.d(f,{AuthModule:()=>V});var g=i(6814),l=i(1896),t=i(5879);let b=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-layout-page"]],decls:3,vars:0,consts:[[1,"grid"],[1,"col-12","mt-5","md:col-6","md:col-offset-3","md:mt-8"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"router-outlet"),t.qZA()())},dependencies:[l.lC],encapsulation:2})}return o})();var h=i(5861),a=i(6223),x=i(9862),y=i(2333),T=i(459),v=i(2939),I=i(1974),Z=i(2296),m=i(5195),c=i(9157),C=i(2032);const A=["passwordInput"];function _(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Ingrese una email v\xe1lido "),t.qZA())}function P(o,u){1&o&&(t.TgZ(0,"mat-form-field",4),t._UZ(1,"input",17,18),t.qZA())}const F=function(){return["/auth/new-account"]};let U=(()=>{class o{constructor(r,n,e,s,p,d){this.authService=r,this.router=n,this.cookieService=e,this.snackBar=s,this.commonService=p,this.fb=d,this.valueChange=new t.vpe,this.titulo="LOG IN",this.usernameEntered=!1}ngOnInit(){this.setForm()}setForm(){this.loginForm=this.fb.group({username:["",[a.kI.required,a.kI.email]],password:["",a.kI.required]})}acceder(){var r=this;return(0,h.Z)(function*(){if(r.loginForm.valid){const n=r.loginForm.value,e=yield r.authService.doLogin(n).toPromise();e&&e.ok&&(e.data.token?(localStorage.setItem("token",e.data.token),localStorage.setItem("usuario",e.data.usuario),localStorage.setItem("nombre_publico",e.data.nombre_publico),localStorage.setItem("ultimaOpcion",e.data.opcion),localStorage.setItem("ultimoGrupo",e.data.grupo),localStorage.setItem("id_rol",e.data.id_rol),localStorage.setItem("id_usuario",e.data.id_usuario),r.commonService.headers=new x.WM({"Content-Type":"application/json",Authorization:`Bearer ${e.data.token}`}),console.log(localStorage.nombre_publico),r.router.navigate(["/movies/home"])):0===e.data.valido?r.snackBar.open("Usuario inhabilitado","Cerrar",{duration:5e3}):1===e.data.valido&&r.snackBar.open("Usuario o contrase\xf1a incorrectas","Cerrar",{duration:5e3}))}})()}forgotPassword(){this.valueChange.emit(!0)}onUsernameEnter(){this.usernameEntered=!0,setTimeout(()=>{this.passwordInput.nativeElement.focus()},0)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(y.e),t.Y36(l.F0),t.Y36(T.N),t.Y36(v.ux),t.Y36(I.v),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-login-page"]],viewQuery:function(n,e){if(1&n&&t.Gf(A,5),2&n){let s;t.iGM(s=t.CRH())&&(e.passwordInput=s.first)}},outputs:{valueChange:"valueChange"},decls:24,vars:7,consts:[["href","https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap","rel","stylesheet"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"signin-content"],[1,"full-width-input"],["matInput","","formControlName","username","placeholder","Correo electr\xf3nico",3,"keydown.enter"],[4,"ngIf"],["class","full-width-input",4,"ngIf"],[1,"mat-card-actions"],["type","submit","mat-raised-button","","color","primary",2,"font-size","15px","padding","25px",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-door-open"],["d","M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1"],["d","M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117M11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z"],["type","submit","mat-raised-button","","color","primary",2,"font-size","15px","padding","25px","margin-left","30px",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person-plus"],["d","M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"],["fill-rule","evenodd","d","M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5"],["matInput","","type","password","formControlName","password","placeholder","Contrase\xf1a"],["passwordInput",""]],template:function(n,e){if(1&n&&(t.TgZ(0,"head"),t._UZ(1,"link",0),t.qZA(),t.TgZ(2,"div",1)(3,"mat-card")(4,"mat-card-content")(5,"h2"),t._uU(6),t.qZA(),t.TgZ(7,"form",2),t.NdJ("ngSubmit",function(){return e.acceder()}),t.TgZ(8,"div",3)(9,"mat-form-field",4)(10,"input",5),t.NdJ("keydown.enter",function(){return e.onUsernameEnter()}),t.qZA(),t.YNc(11,_,2,0,"mat-error",6),t.qZA(),t.YNc(12,P,3,0,"mat-form-field",7),t.qZA(),t.TgZ(13,"div",8)(14,"button",9),t.O4$(),t.TgZ(15,"svg",10),t._UZ(16,"path",11)(17,"path",12),t.qZA(),t._uU(18," Iniciar sesi\xf3n "),t.qZA(),t.kcU(),t.TgZ(19,"button",13),t.O4$(),t.TgZ(20,"svg",14),t._UZ(21,"path",15)(22,"path",16),t.qZA(),t._uU(23," Crear cuenta "),t.qZA()()()()()()),2&n){let s;t.xp6(6),t.Oqu(e.titulo),t.xp6(1),t.Q6J("formGroup",e.loginForm),t.xp6(4),t.Q6J("ngIf",null==(s=e.loginForm.get("username"))?null:s.hasError("email")),t.xp6(1),t.Q6J("ngIf",e.usernameEntered),t.xp6(2),t.Q6J("disabled",e.loginForm.invalid||e.showSpinner),t.xp6(5),t.Q6J("routerLink",t.DdM(6,F))}},dependencies:[g.O5,l.rH,Z.lW,m.a8,m.dn,c.KE,c.TO,C.Nt,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-card[_ngcontent-%COMP%]{width:600px;height:370px;text-align:center;vertical-align:center;padding:30px}.full-width-input[_ngcontent-%COMP%]{width:100%}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Bebas Neue,sans-serif;font-size:60px;text-align:center;margin-bottom:30px}.signin-content[_ngcontent-%COMP%]{margin-bottom:20px}"]})}return o})();var M=i(6346);function N(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El campo correo electr\xf3nico es obligatorio "),t.qZA())}function O(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Ingrese una email v\xe1lido "),t.qZA())}function S(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El campo nombre p\xfablico es obligatorio "),t.qZA())}function J(o,u){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," El campo password es obligatorio "),t.qZA())}const k=function(){return["/auth/login"]},E=[{path:"",component:b,children:[{path:"login",component:U},{path:"new-account",component:(()=>{class o{constructor(r,n){this.snackBar=r,this.usersService=n}ngOnInit(){this.userForm=new a.cw({id_usuario:new a.NI(0),usuario:new a.NI(null,[a.kI.required,a.kI.email]),nombre_publico:new a.NI(null,a.kI.required),password:new a.NI(null,[a.kI.required])})}confirmAdd(){var r=this;return(0,h.Z)(function*(){if(r.userForm.valid){const n=r.userForm.value,e=yield r.usersService.addUser(n).toPromise();e&&e.ok?(console.log(e),r.snackBar.open("Usuario creado correctamente.","Cerrar",{duration:5e3})):r.snackBar.open("Error al a\xf1adir al usuario.","Cerrar",{duration:5e3})}else r.snackBar.open("Por favor complete el formulario correctamente","Cerrar",{duration:5e3})})()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(v.ux),t.Y36(M.f))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-register-page"]],decls:30,vars:8,consts:[["href","https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap","rel","stylesheet"],[1,"container"],[3,"formGroup","ngSubmit"],[1,"signin-content"],[1,"full-width-input"],["matInput","","formControlName","usuario","placeholder","Correo electr\xf3nico"],[4,"ngIf"],["matInput","","formControlName","nombre_publico","placeholder","Nombre p\xfablico"],["matInput","","type","password","formControlName","password","placeholder","Password"],[1,"mat-card-actions"],["type","submit","mat-raised-button","","color","primary",2,"font-size","15px","padding","25px",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person-plus"],["d","M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H1s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C9.516 10.68 8.289 10 6 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"],["fill-rule","evenodd","d","M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5"],["type","submit","mat-flat-button","","color","accent",2,"font-size","15px","padding","25px","margin-left","40px",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-door-open"],["d","M8.5 10c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1"],["d","M10.828.122A.5.5 0 0 1 11 .5V1h.5A1.5 1.5 0 0 1 13 2.5V15h1.5a.5.5 0 0 1 0 1h-13a.5.5 0 0 1 0-1H3V1.5a.5.5 0 0 1 .43-.495l7-1a.5.5 0 0 1 .398.117M11.5 2H11v13h1V2.5a.5.5 0 0 0-.5-.5M4 1.934V15h6V1.077z"]],template:function(n,e){if(1&n&&(t.TgZ(0,"head"),t._UZ(1,"link",0),t.qZA(),t.TgZ(2,"div",1)(3,"mat-card")(4,"mat-card-content")(5,"h2"),t._uU(6,"Crear nueva cuenta"),t.qZA(),t.TgZ(7,"form",2),t.NdJ("ngSubmit",function(){return e.confirmAdd()}),t.TgZ(8,"div",3)(9,"mat-form-field",4),t._UZ(10,"input",5),t.YNc(11,N,2,0,"mat-error",6),t.YNc(12,O,2,0,"mat-error",6),t.qZA(),t.TgZ(13,"mat-form-field",4),t._UZ(14,"input",7),t.YNc(15,S,2,0,"mat-error",6),t.qZA(),t.TgZ(16,"mat-form-field",4),t._UZ(17,"input",8),t.YNc(18,J,2,0,"mat-error",6),t.qZA()(),t.TgZ(19,"div",9)(20,"button",10),t.O4$(),t.TgZ(21,"svg",11),t._UZ(22,"path",12)(23,"path",13),t.qZA(),t._uU(24," Crear cuenta "),t.qZA(),t.kcU(),t.TgZ(25,"button",14),t.O4$(),t.TgZ(26,"svg",15),t._UZ(27,"path",16)(28,"path",17),t.qZA(),t._uU(29," Ya tengo cuenta "),t.qZA()()()()()()),2&n){let s,p,d,w;t.xp6(7),t.Q6J("formGroup",e.userForm),t.xp6(4),t.Q6J("ngIf",null==(s=e.userForm.get("usuario"))?null:s.hasError("required")),t.xp6(1),t.Q6J("ngIf",null==(p=e.userForm.get("usuario"))?null:p.hasError("email")),t.xp6(3),t.Q6J("ngIf",null==(d=e.userForm.get("nombre_publico"))?null:d.hasError("required")),t.xp6(3),t.Q6J("ngIf",null==(w=e.userForm.get("password"))?null:w.hasError("required")),t.xp6(2),t.Q6J("disabled",!e.userForm.invalid),t.xp6(5),t.Q6J("routerLink",t.DdM(7,k))}},dependencies:[g.O5,l.rH,Z.lW,m.a8,m.dn,c.KE,c.TO,C.Nt,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}mat-card[_ngcontent-%COMP%]{width:600px;height:510px;text-align:center;vertical-align:center;padding:30px}.full-width-input[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Bebas Neue,sans-serif;font-size:60px;text-align:center;margin-bottom:40px}.signin-content[_ngcontent-%COMP%]{margin-bottom:20px}"]})}return o})()},{path:"**",redirectTo:"login"}]}];let B=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(E),l.Bz]})}return o})();var q=i(8178);let V=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[g.ez,B,q.q,a.UX]})}return o})()}}]);